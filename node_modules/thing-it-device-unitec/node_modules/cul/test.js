var Cul = require('./cul.js');

var options = {
    serialport: '/dev/ttyACM1',
    rssi: true
};

var cul = new Cul(options);

cul.on('ready', function () {
    console.log('ready');
   // cul.cmd('FS20', 'B331', '00', 'dim100%', function (err, res) {
   //     console.log('cmd callback', err, res);
   // });
});

cul.on('data', function (raw, obj) {
    console.log(raw, obj);
});

cul.on('close', function () {
    console.log('serialport closed');
});

process.on('SIGTERM', function () {
    console.log('SIGTERM');
    cul.close(function () {
        process.exit(0);
    });
});

