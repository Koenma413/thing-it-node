<div class="btn-group pull-left">
    <div class="btn">
        <a ng-click="mobileConsole.popPage()"><i class="fa fa-arrow-left"></i></a>
    </div>
</div>
<div ui-content-for="topbar">
    <div class="navbar-brand navbar-brand-center">
        <i class="icon sl-network-2-1"></i> {{mobileConsole.topPage().mesh.label}}
    </div>
    <div class="btn-group pull-right">
        <div ui-toggle="uiSidebarRight" class="btn">
            <i class="icon sl-list-1"></i>
        </div>
    </div>
    <div class="btn-group pull-left">
        <div class="btn">
            <a ng-click="mobileConsole.popPage()"><i class="icon sl-arrow-59"></i></a>
        </div>
    </div>
    <div ng-include="'colorBar.html'"></div>
</div>
<div class="scrollable" ui-state="searchBar">
    <div class="scrollable-content" ui-scroll-bottom='bottomReached()' ui-swipe-right="mobileConsole.popPage()">
        <div class="list-group">
            <a ng-repeat="node in mobileConsole.topPage().mesh.nodes track by $index"
               ng-click="mobileConsole.openNodePage(mobileConsole.topPage().mesh, node)"
               class="list-group-item">
                <table style="width: 100%;">
                    <tr style="vertical-align: middle;">
                        <td style="width: 99%;">
                            <table>
                                <tr style="vertical-align: middle;">
                                    <td><i class="icon sl-router navigationIcon"></i></td>
                                    <td>
                                        <table style="margin-left: 0.5em;">
                                            <tr>
                                                <td>{{node.label}}
                                                    <i class="fa fa-question stateIcon"
                                                       ng-show="node.state === 'disconnected'"></i>
                                                    <i class="fa fa-repeat fa-spin stateIcon"
                                                       ng-show="node.state === 'running'"></i> {{node.lastHeartbeat }}
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <table class="formTable"
                                                           style="font-size: 0.8em; margin-top: 0.5em;">
                                                        <tr>
                                                            <td><label>Last Configured</label></td>
                                                            <td>{{node.lastConfigurationTimestamp | date:'dd/MM/yy
                                                                HH:mm'}}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td><label>[thing-it-node]
                                                                Version</label></td>
                                                            <td>{{node.firmwareVersion}}</td>
                                                        </tr>
                                                    </table>
                                                </td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td style="width: 25px;"><i
                                class="icon sl-arrow-60 pull-right navigationIcon"></i></td>
                    </tr>
                </table>
            </a>
        </div>
    </div>
</div>
<div ui-content-for="modals">
    <div ng-include="'messageDialog.html'"></div>
    <div ng-include="'deviceAdvertisementDialog.html'"></div>
    <div class="modal modal-overlay" ui-if='componentPluginUi' ui-state='componentPluginUi'>
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="circleText pull-right" style="width: 20px;" ui-turn-off="componentPluginUi">
                        <div><i class="fa fa-times"></i></div>
                    </div>
                    <h1>{{mobileConsole.topPage().component.label}}</h1>
                </div>
                <div class="modal-body">
                    <div ng-include="mobileConsole.getComponentPluginPath(topPage().component)"
                         ng-repeat="device in [mobileConsole.topPage().component]"></div>
                </div>
            </div>
        </div>
    </div>
</div>

