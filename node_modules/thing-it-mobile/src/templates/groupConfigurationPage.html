<div ui-content-for="topbar">
    <div class="navbar-brand navbar-brand-center">
        <i class="icon sl-setting-adjustment"></i> {{mobileConsole.topPage().group.label | splitcharacters:25}}
    </div>
    <div class="btn-group pull-right">
        <div ui-toggle="uiSidebarRight" class="btn">
            <i class="icon sl-list-1"></i>
        </div>
    </div>
    <div class="btn-group pull-left">
        <div class="btn">
            <a ng-click="mobileConsole.popPage()"><i class="icon sl-arrow-59"></i></a>
        </div>
    </div>
    <ti-color-bar></ti-color-bar>
</div>
<div class="scrollable" ui-state="searchBar">
    <div class="scrollable-content" ui-scroll-bottom='bottomReached()' ui-swipe-right="mobileConsole.popPage()">
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="panel-group">
                    <fieldset>
                        <div class="form-group">
                            <label>Label</label>
                            <input
                                    ng-model="mobileConsole.topPage().group.label"
                                    class="form-control"
                                    placeholder="Enter Label">
                        </div>
                        <div class="form-group">
                            <label>Icon/Image</label>
                            <a ui-turn-on='myDropdown' class='btn'>
                                <i class="icon sl-house-2"></i>
                            </a>
                            <ul
                                    class="dropdown-menu"
                                    ui-outer-click="Ui.turnOff('myDropdown')"
                                    ui-outer-click-if="Ui.active('myDropdown')"
                                    role="menu"
                                    ui-show="myDropdown"
                                    ui-state="myDropdown"
                                    ui-turn-off="myDropdown">
                                <li>Select from Camera Roll</li>
                                <li>Take a picture</li>
                                <li class="divider"></li>
                                <li><a><i class="icon sl-house-2"></i></a></li>
                                <li><a><i class="icon sl-house-2"></i></a></li>
                                <li><a><i class="icon sl-house-2"></i></a></li>
                            </ul>
                        </div>
                    </fieldset>
                </div>
                <div class="panel-group" ui-state="devicesInGroupConfigurationAccordion" ui-default="0">
                    <div class="panel panel-default">
                        <div class="panel-heading" ui-set="{devicesInGroupConfigurationAccordion: 0}">
                            <h4 class="panel-title">Devices
                            </h4>
                        </div>
                        <div ui-if="devicesInGroupConfigurationAccordion == 0" style="padding: 1em;">
                            <table style="width: 100%;">
                                <tr style="vertical-align: middle;" ng-repeat="device in mobileConsole.node.devices"
                                    ng-show="device.__type.tangible">
                                    <td>
                                        <label>{{device.label | splitcharacters:30 }}</label>
                                    </td>
                                    <td>
                                        <input type="checkbox" ti-checkbox ng-model="mobileConsole.topPage().deviceFlags[device.id]">
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" ui-set="{devicesInGroupConfigurationAccordion: 1}">
                            <h4 class="panel-title">Actors
                            </h4>
                        </div>
                        <div ui-if="devicesInGroupConfigurationAccordion == 1" style="padding: 1em;">
                            <table style="width: 100%;">
                                <tr style="vertical-align: middle;" ng-repeat="actor in mobileConsole.topPage().actors">
                                    <td>
                                        <label>{{actor.device.label | splitcharacters:15 }}/{{actor.label |
                                            splitcharacters:15 }}</label>
                                    </td>
                                    <td>
                                        <input type="checkbox" ti-checkbox ng-model="mobileConsole.topPage().actorFlags[actor.fullId()]">
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" ui-set="{devicesInGroupConfigurationAccordion: 2}">
                            <h4 class="panel-title">Sensors
                            </h4>
                        </div>
                        <div ui-if="devicesInGroupConfigurationAccordion == 2" style="padding: 1em;">
                            <table style="width: 100%;">
                                <tr style="vertical-align: middle;" ng-repeat="sensor in mobileConsole.topPage().sensors">
                                    <td>
                                        <label>{{sensor.device.label | splitcharacters:15 }}/{{sensor.label |
                                            splitcharacters:15 }}</label>
                                    </td>
                                    <td>
                                        <input type="checkbox" ti-checkbox ng-model="mobileConsole.topPage().sensorFlags[sensor.fullId()]">
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading" ui-set="{devicesInGroupConfigurationAccordion: 3}">
                            <h4 class="panel-title">Services
                            </h4>
                        </div>
                        <div ui-if="devicesInGroupConfigurationAccordion == 3" style="padding: 1em;">
                            <table style="width: 100%;">
                                <tr style="vertical-align: middle;" ng-repeat="device in mobileConsole.node.services">
                                    <td>
                                        <label>{{service.label | splitcharacters:30 }}</label>
                                    </td>
                                    <td>
                                        <input type="checkbox" ti-checkbox ng-model="mobileConsole.topPage().serviceFlags[service.id]">
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    <div class="panel panel-default" ng-if="false">
                        <div class="panel-heading" ui-set="{devicesInGroupConfigurationAccordion: 4}">
                            <h4 class="panel-title">Subgroups
                            </h4>
                        </div>
                        <div ui-if="devicesInGroupConfigurationAccordion == 4">
                            <div class="list-group">
                                <a ng-click="mobileConsole.pushGroupConfigurationPage()" class="list-group-item">
                                    <i class="fa fa-plus"></i>
                                </a>
                                <a ng-repeat="group in mobileConsole.topPage().group.subGroups" class="list-group-item"
                                   ng-click="mobileConsole.pushGroupConfigurationPage(group)"
                                   ui-swipe-left="mobileConsole.pushGroupConfigurationPage(group)">
                                    <i class="icon sl-setting-adjustment navigationIcon"></i>{{group.label}}
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <button class="btn" ng-hide="mobileConsole.topPage().groupId"
                        ng-click="mobileConsole.topPage().createGroup(mobileConsole.topPage().group)">
                    Create
                </button>
                <button class="btn" ng-show="mobileConsole.topPage().groupId"
                        ng-click="mobileConsole.topPage().updateGroup(mobileConsole.topPage().group)">
                    Change
                </button>
                <button class="btn" ng-show="mobileConsole.topPage().groupId"
                        ng-click="mobileConsole.topPage().deleteGroup(mobileConsole.topPage().group)">
                    Delete
                </button>
            </div>
        </div>
    </div>
</div>
<div ui-content-for="modals">
    <div ng-include="'confirmationDialog.html'"></div>
</div>