/**
 * This test file allows to run the basic initiation of the
 * HellowWorld class. It does not, however, simulate full
 * interaction with the node.
 */

var FOSCAM = require('../camera');

var foscamDiscovery = FOSCAM.discovery({});

foscamDiscovery.isSimulated = function () {
    return false;
};

foscamDiscovery.node = {
    options: {dataDirectory: "/Users/Klaus/tin/data"}, isSimulated: function () {
        return false
    }
};

foscamDiscovery.logInfo = function () {
    if (arguments.length == 1) {
        console.log(arguments[0]);
    }
    else {
        console.log(arguments);
    }
};

foscamDiscovery.logDebug = function () {
    foscamDiscovery.logInfo(arguments);
};

foscamDiscovery.logError = function () {
    foscamDiscovery.logInfo(arguments);
};

foscamDiscovery.advertiseDevice = function (device) {
    device.isSimulated = function () {
        return false;
    };

    device.node = {
        options: {dataDirectory: "/Users/Klaus/tin/data"}, isSimulated: function () {
            return false
        }
    }
    ;
    device.id = "test01234567890";

    device.isSimulated = function () {
        return device.configuration.simulated;
    }

    device.publishEvent = function (event, data) {
        console.log("Event", event);
    };

    device.publishStateChange = function () {
        //console.log("State Change", this.getState());
        console.log("State Change");
    };

    device.logInfo = function () {
        if (arguments.length == 1) {
            console.log(arguments[0]);
        }
        else {
            console.log(arguments);
        }
    };

    device.logDebug = function () {
        device.logInfo(arguments);
    };

    device.logError = function () {
        device.logInfo(arguments);
    };

    console.log("About to start device.");
    device.start();

    setTimeout(function(){device.panLeft()}.bind(this), 5000);
    setTimeout(function(){device.panRight()}.bind(this), 10000);
}

console.log("About to start.");
foscamDiscovery.start();


