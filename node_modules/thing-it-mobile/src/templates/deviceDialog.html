<div class="modal" ui-if='deviceDialog' ui-state='deviceDialog'>
    <div class="modal-backdrop in"></div>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"><span ng-show="mobileConsole.deviceDialog.mode == 'create'">Add Device</span>
                    <span ng-show="mobileConsole.deviceDialog.mode == 'update'">Update Device</span></h4>
            </div>
            <div class="modal-body">
                <form role="form">
                    <fieldset>
                        <div class="form-group">
                            <label>Device Type</label>
                            <select ng-model="mobileConsole.deviceDialog.device.plugin"
                                    ng-options="deviceType.path as (deviceType.label | splitcharacters:30 ) for deviceType in mobileConsole.deviceTypes">
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Label</label>
                            <input
                                    ng-model="mobileConsole.deviceDialog.device.label"
                                    class="form-control"
                                    placeholder="Enter Label">
                        </div>
                        <div ng-repeat="objectType in [mobileConsole.deviceTypes[mobileConsole.deviceDialog.device.plugin].configuration]">
                            <div ng-include="'objectPanel.html'"
                                 ng-repeat="object in [mobileConsole.deviceDialog.device.configuration]"></div>
                        </div>
                    </fieldset>
                </form>
            </div>
            <div class="modal-footer">
                <button ui-turn-off="deviceDialog" class="btn" ng-show="mobileConsole.deviceDialog.mode == 'create'"
                        ng-click="mobileConsole.createDevice(mobileConsole.deviceDialog.device)">
                    Add
                </button>
                <button ui-turn-off="deviceDialog" class="btn" ng-show="mobileConsole.deviceDialog.mode == 'update'"
                        ng-click="mobileConsole.updateDevice(mobileConsole.deviceDialog.device)">
                    Update
                </button>
                <button ui-turn-off="deviceDialog" class="btn">Cancel</button>
            </div>
        </div>
    </div>
</div>
