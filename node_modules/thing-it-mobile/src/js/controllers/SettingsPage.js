/**
 *
 * @constructor
 */
function SettingsPage() {
    /**
     *
     */
    SettingsPage.prototype.initialize = function (console) {
        this.id = "settings";
        this.console = console;

        return this;
    };

    /**
     *
     */
    SettingsPage.prototype.show = function () {
        var deferred = $.Deferred();

        this.server = this.console.consoleService.settings.server;
        this.host = this.console.consoleService.settings.host;
        this.port = this.console.consoleService.settings.port;

        deferred.resolve();

        return deferred.promise();
    };

    /**
     *
     */
    SettingsPage.prototype.leave = function () {
    };

    /**
     *
     */
    SettingsPage.prototype.openSettingsDialog = function () {
        this.console.Ui.turnOn("serverSettingsDialog");
    };

    /**
     *
     */
    SettingsPage.prototype.applySettings = function () {
        if (!this.host || !this.port) {
            return;
        }

        this.console.consoleService.settings.server = this.server;
        this.console.consoleService.settings.host = this.host;
        this.console.consoleService.settings.port = this.port;

        this.console.consoleService.persistSettings();
        this.console.refreshServer();

        this.console.Ui.turnOff("serverSettingsDialog");
    };
}
